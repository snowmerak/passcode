
# Passcode

`passcode` is a Go library that implements a Challenge-Response based One-Time Password (OTP) authentication system. It is designed to easily add a simple and flexible two-factor authentication to your applications.

## ‚ú® Features

*   **Challenge-Response Mechanism**: Uses a secure method where the server sends a random value (Challenge) to the client for authentication.
*   **Supports Various Hash Algorithms**: Supports modern and secure hash algorithms.
    *   SHA3-KMAC (128/256)
    *   BLAKE3 (Keyed Mode, 128/256)
*   **Flexible Security Levels**: You can choose between 128-bit and 256-bit security strengths to fit various environments, from high-performance servers to low-spec embedded devices.
*   **Simple API**: Easily integrates into any Go project.

## ‚öôÔ∏è How It Works

The authentication process follows a challenge-response model:

1.  **Authentication Request**: The client requests authentication with its ID to the server.
2.  **Challenge Generation**: The server looks up the pre-shared secret key for that ID and generates a cryptographically secure random value, the "Challenge".
3.  **Challenge Transmission**: The server sends the challenge to the client.
4.  **OTP Computation**: Both the server and the client compute the OTP hash using the same secret key and the received challenge.
5.  **Response Submission**: The client submits the computed OTP as a "Response" to the server.
6.  **Verification**: The server compares the OTP received from the client with the one it computed itself. If the two values match, the authentication is successful.

This process ensures that the secret key is never transmitted over the network, and each OTP is valid for only one challenge.

## üì¶ Installation

```bash
go get github.com/snowmerak/passcode
```

## üöÄ Usage

Here is a simple example of how to use `passcode` to generate an OTP.

```go
package main

import (
	"crypto/rand"
	"fmt"
	"log"

	"github.com/snowmerak/passcode"
)

func main() {
	// 1. Shared secret key between server and client (32 bytes recommended)
	secretKey := make([]byte, 32)
	if _, err := rand.Read(secretKey); err != nil {
		log.Fatal(err)
	}

	// 2. Create a new Passcode instance
	// Available algorithms:
	// - passcode.AlgorithmSHA3KMAC128
	// - passcode.AlgorithmSHA3KMAC256
	// - passcode.AlgorithmBLAKE3KeyedMode128
	// - passcode.AlgorithmBLAKE3KeyedMode256
	pc, err := passcode.NewPasscode(passcode.AlgorithmBLAKE3KeyedMode256, secretKey)
	if err != nil {
		log.Fatal(err)
	}

	// 3. Challenge generated by the server (a random value)
	challenge := make([]byte, 16)
	if _, err := rand.Read(challenge); err != nil {
		log.Fatal(err)
	}

	// 4. Compute the OTP based on the challenge
	otp := pc.Compute(challenge)

	// Prints the 12-character hexadecimal OTP string
	fmt.Printf("Challenge: %x\n", challenge)
	fmt.Printf("Generated OTP: %s\n", otp)

	// 5. The server verifies the OTP submitted by the client by computing it in the same way and comparing the results.
}
```

## üõ°Ô∏è Available Algorithms

-   `AlgorithmSHA3KMAC128`
-   `AlgorithmSHA3KMAC256`
-   `AlgorithmBLAKE3KeyedMode128`
-   `AlgorithmBLAKE3KeyedMode256`

## üåç Language Ports

This library is available in multiple languages:

### Official Implementations
- **Go** (Reference Implementation) - This repository
- **Rust** - Native Rust implementation in `ports/rust/`
- **WebAssembly** - Universal WASM build in `ports/wasm/`

### Language Bindings (WASM-based)
- **Node.js** - `ports/nodejs/` - Full TypeScript support
  ```bash
  npm install @snowmerak/passcode
  ```
- **Python** - `ports/python/` - Python 3.8+ support
  ```bash
  pip install passcode-py
  ```
- **Dart/Flutter** - `ports/dart/` - Cross-platform Flutter support
  ```yaml
  dependencies:
    passcode: ^1.0.0
  ```

All implementations produce identical results and are tested against the same test vectors. See `test/` directory for cross-implementation validation.

## üìÑ License

This project is licensed under the MIT License.
